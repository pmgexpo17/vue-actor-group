!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("string-pixel-width")):"function"==typeof define&&define.amd?define(["string-pixel-width"],e):"object"==typeof exports?exports["vue-actor-group"]=e(require("string-pixel-width")):t["vue-actor-group"]=e(t["string-pixel-width"])}(window,function(i){return o={},r.m=n=[function(t,e){t.exports=i},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function n(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=t,this.prev=null,i&&(this.layout=i),this.__init(e)}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(n,[{key:"__init",value:function(t){if(t){var e=t.prev;this.prev=e||t,t.prev=this}this.halfLabelWidth=this.evalHalfLabelWidth(),console.log("actor, labelwidth : ",this.name,this.labelWidth),this.centerX=this.evalCenterX(t)}},{key:"evalCenterX",value:function(t){return t||(t=this),this.leftOffset(t)+this.halfLabelWidth}},{key:"centerY",value:function(t){return this.layout.topMargin+this.labelHeight+t}},{key:"evalTextWidth",value:function(t){return r()(t,{font:this.layout.font,size:this.layout.fontSize})}},{key:"evalHalfLabelWidth",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.name,i=r()(e,{font:this.layout.font,size:this.layout.fontSize});return this.layout.leftPad+Math.round(i/2)}},{key:"labelXOffset",value:function(t){return 0<arguments.length&&void 0!==t&&t?Math.round(this.layout.leftMargin/2):this.layout.leftMargin+this.labelWidth}},{key:"labelY",value:function(t){return this.layout.topMargin+t}},{key:"leftOffset",value:function(t){for(var e=0,i=this;i!=t;)e+=i.prev.labelXOffset(),i=i.prev;return e+=i.labelXOffset(!0),e}},{key:"textY",value:function(t){return this.layout.topMargin+this.layout.fontSize+this.layout.topPad-this.layout.strokeWidth+t}},{key:"arrowCoords",value:function(t){var e=this.findMember(t.actorTo),i={},n=e.centerX<this.centerX?-1:1;i.arrowX1=this.centerX+n*this.layout.halfBodyWidth;var r=this.layout.halfBodyWidth+this.layout.arrowHeadSize+this.layout.strokeWidth;i.arrowX2=e.centerX-n*r;var o=this.evalTextWidth(t.value),a=Math.abs(e.centerX-this.centerX)-2*this.layout.halfBodyWidth,u=Math.round((a-o)/2);return i.arrowTextX=u+this.layout.halfBodyWidth,i.arrowTextX+=n<1?e.centerX:this.centerX,i}},{key:"addArtifact",value:function(t){var e={index:t.programIndex,actorFrom:this.name,bodyYOffset:t.programIndex?t.bodyYOffset:this.bodyY,type:t.type,value:t.value};return"transition"==t.type&&Object.assign(e,this.arrowCoords(t)),e.bodyYOffset+=this.layout.topMargin,t.programIndex&&(e.bodyYOffset+=this.labelHeight),e}},{key:"findMember",value:function(t){if(this.name==t)return this;for(var e=this.prev;e.name!=t&&e.name!=this.name;)e=e.prev;return e}},{key:"arrowX1",get:function(){return this.centerX+this.layout.halfBodyWidth}},{key:"bodyHeight",get:function(){return this.layout.initBodyHeight-this.labelHeight}},{key:"bodyWidth",get:function(){return 2*this.layout.halfBodyWidth}},{key:"bodyX",get:function(){return this.centerX-this.layout.halfBodyWidth}},{key:"bodyY",get:function(){return this.centerY(0)+10}},{key:"labelHeight",get:function(){return this.layout.fontSize+2*this.layout.topPad}},{key:"labelWidth",get:function(){return 2*this.halfLabelWidth}},{key:"labelX",get:function(){return this.centerX-this.halfLabelWidth}},{key:"textX",get:function(){return this.centerX-this.halfLabelWidth+this.layout.leftPad}}]),n}(),u={first:null,setConfig:function(t){a.prototype.layout=t},new:function(t,e){var i=1<arguments.length&&void 0!==e?e:null,n=new a(t,this.first,i);return this.first||(this.first=n),n},addArtifact:function(t){return this.first?this.first.findMember(t.actorFrom).addArtifact(t):[]},reset:function(){this.first=null}};e.default=u}],r.c=o,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});